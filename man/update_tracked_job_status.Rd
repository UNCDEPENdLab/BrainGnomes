% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/job_tracking_functions.R
\name{update_tracked_job_status}
\alias{update_tracked_job_status}
\title{Update Job Status in Tracking SQLite Database}
\usage{
update_tracked_job_status(
  sqlite_db = NULL,
  job_id = NULL,
  status,
  output_manifest = NULL,
  cascade = FALSE,
  exclude = NULL
)
}
\arguments{
\item{sqlite_db}{Character string. Path to the SQLite database file used for job tracking.}

\item{job_id}{Character string or numeric. ID of the job to update. If numeric, it will be coerced to a string.}

\item{status}{Character string. The job status to set. Must be one of:
\code{"QUEUED"}, \code{"STARTED"}, \code{"FAILED"}, \code{"COMPLETED"}, \code{"FAILED_BY_EXT"}.}

\item{output_manifest}{Character string. Optional JSON manifest of output files to store when
status is \code{"COMPLETED"}. See \code{\link{capture_output_manifest}}.}

\item{cascade}{Logical. If \code{TRUE}, and the \code{status} is a failure type (\code{"FAILED"} or \code{"FAILED_BY_EXT"}),
the failure is recursively propagated to child jobs not listed in \code{exclude}.}

\item{exclude}{Character or numeric vector. One or more job IDs to exclude from cascading failure updates.}
}
\value{
Invisibly returns \code{NULL}. Side effect is a modification to the SQLite job tracking table.
}
\description{
Updates the status of a specific job in a tracking database, optionally cascading failure status to downstream jobs.
}
\details{
The function updates both the job \code{status} and a timestamp corresponding to the status type:
\itemize{
\item \code{"QUEUED"} -> updates \code{time_submitted}
\item \code{"STARTED"} -> updates \code{time_started}
\item \code{"FAILED"}, \code{"COMPLETED"}, or \code{"FAILED_BY_EXT"} -> updates \code{time_ended}
}

When \code{status} is \code{"COMPLETED"} and \code{output_manifest} is provided, the manifest
is stored in the \code{output_manifest} column for later verification.

If \code{cascade = TRUE}, and the status is \code{"FAILED"} or \code{"FAILED_BY_EXT"}, any dependent jobs (as determined
via \code{get_tracked_job_status()}) will be recursively marked as \code{"FAILED_BY_EXT"}, unless their status is already
\code{"FAILED"} or they are listed in \code{exclude}.

If \code{sqlite_db} or \code{job_id} is invalid or missing, the function fails silently and returns \code{NULL}.
}
