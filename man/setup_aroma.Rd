% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/setup_project.R
\name{setup_aroma}
\alias{setup_aroma}
\title{Configure ICA-AROMA denoising}
\usage{
setup_aroma(scfg, fields = NULL)
}
\arguments{
\item{scfg}{A project configuration object, as produced by \code{load_project()} or \code{setup_project()}.}

\item{fields}{A character vector of field names to prompt for. If \code{NULL}, all fields related to AROMA will be prompted.}
}
\value{
A modified version of the \code{scfg} list with the \verb{$aroma} entry added or updated.
}
\description{
This function configures the ICA-AROMA (Independent Component Analysis-based Automatic Removal Of Motion Artifacts)
step for post-fMRIPrep processing. It sets scheduling and resource parameters that will be used to apply
AROMA-based denoising to BOLD fMRI data using FSL's \code{fsl_regfilt} or an equivalent wrapper.
}
\details{
ICA-AROMA is a data-driven denoising method that identifies motion-related independent components and removes them
from BOLD time series using non-aggressive regression. This step should be run \strong{after fMRIPrep} has completed.
The settings configured here specify compute resource usage (e.g., memory, cores, time),
command-line options, and scheduler-specific arguments for running AROMA on each subject/session.

By default, this function sets:
\itemize{
\item \code{memgb}: 32 (memory in GB)
\item \code{nhours}: 36 (max runtime in hours)
\item \code{ncores}: 1 (number of CPU cores)
\item \code{cli_options}: "" (any extra command-line flags for the wrapper)
\item \code{sched_args}: "" (additional job scheduler directives)
}

Users may also opt to remove large intermediate AROMA outputs after
completion. These NIfTI/JSON files are not required for applying AROMA
during postprocessing and can be deleted to save disk space. Cleanup is only
available when fMRIPrep output spaces do not include
\code{MNI152NLin6Asym:res-2}; if that space is later added, cleanup will be
skipped.
}
\keyword{internal}
