% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{image_quantile}
\alias{image_quantile}
\title{Compute Quantiles from a 3D or 4D NIfTI Image}
\arguments{
\item{in_file}{Path to the input 3D or 4D NIfTI image (.nii or .nii.gz).}

\item{brain_mask}{Optional path to a 3D NIfTI image used as a brain mask. Voxels with values > 0.001 are retained.
The mask must have the same spatial dimensions as the input image. If \code{R_NilValue}, no mask is used.}

\item{quantiles}{A numeric vector of probabilities in \verb{[0, 1]} specifying which quantiles to compute (e.g., 0.5 for the median).}

\item{exclude_zero}{If \code{true}, zero-valued voxels in the image will be excluded from the quantile calculation.}
}
\value{
A named numeric vector of quantiles. Names are formatted as percentage strings (e.g., "50.00\%").
}
\description{
Computes one or more quantiles from a 3D or 4D NIfTI image. Optionally applies a 3D brain mask
and/or excludes zero-valued voxels. For 4D images, the function pools over all timepoints.
}
\details{
\itemize{
\item For 4D images, the mask (if used) is applied identically to all volumes.
\item Quantile calculation uses partial sorting for performance (via \code{std::nth_element}).
\item Throws an error if no voxels are valid after masking or zero exclusion.
}
}
\examples{
\dontrun{
# Compute the median
image_quantile("bold.nii.gz", 0.5)

# With masking and zero exclusion
image_quantile("bold.nii.gz", "mask.nii.gz", c(0.25, 0.5, 0.75), exclude_zero=TRUE)
}

}
