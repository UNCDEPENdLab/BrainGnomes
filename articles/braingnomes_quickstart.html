<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>BrainGnomes Quickstart • BrainGnomes</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BrainGnomes Quickstart">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BrainGnomes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/braingnomes_quickstart.html">BrainGnomes Quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/building_containers.html">Building Singularity containers for BrainGnomes</a></li>
    <li><a class="dropdown-item" href="../articles/postprocessing.html">BrainGnomes Postprocessing Walkthrough</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/UNCDEPENdLab/BrainGnomes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>BrainGnomes Quickstart</h1>
                        <h4 data-toc-skip class="author">Michael
Hallquist</h4>
            
            <h4 data-toc-skip class="date">29 Jul 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/UNCDEPENdLab/BrainGnomes/blob/main/vignettes/braingnomes_quickstart.Rmd" class="external-link"><code>vignettes/braingnomes_quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>braingnomes_quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>BrainGnomes is an R package that streamlines the preprocessing and
analysis of fMRI data on high-performance computing (HPC) clusters. It
serves as a wrapper around common fMRI processing tools such as
HeuDiConv (for DICOM-to-BIDS conversion), BIDS Validator, MRIQC (quality
control), fMRIPrep (preprocessing pipeline), and ICA-AROMA (automatic
removal of motion artifacts), orchestrating their execution in a
coherent pipeline. The package also provides additional processing steps
for preparing fMRI data for analysis, such as spatial smoothing,
temporal filtering, and confound regression. BrainGnomes uses
containerized software (Singularity images) to ensure reproducible
environments for imaging tools and it manages job submission to HPC
schedulers (SLURM or TORQUE). In this tutorial, we will walk through the
full workflow of setting up and running an fMRI preprocessing study
using BrainGnomes. We will cover the three key functions:</p>
<ul>
<li>setup_project(): Initialize a new study configuration (either from
scratch or from an existing YAML configuration file)</li>
<li>edit_project(): Interactively review and modify the study
configuration by sections</li>
<li>run_project(): Execute the preprocessing pipeline steps on your
dataset, utilizing the HPC environment</li>
</ul>
<p>Along the way, we assume you have the required Singularity container
images for each tool and a working HPC environment. Additional
information about setting up the compute environment is provided in <a href="building_containers.html">BrainGnomes Singularity container
setup</a>. This vignette provides example R code snippets, explains
expected inputs/outputs, and offers troubleshooting tips for common
issues. By the end of demo, a new user should understand how to
configure a study and launch the BrainGnomes pipeline from start to
finish.</p>
<div class="section level3">
<h3 id="things-to-include-here">Things to include here<a class="anchor" aria-label="anchor" href="#things-to-include-here"></a>
</h3>
<ol style="list-style-type: decimal">
<li>subject filter</li>
</ol>
</div>
<div class="section level3">
<h3 id="basic-process-flow-of-braingnomes">Basic process flow of BrainGnomes<a class="anchor" aria-label="anchor" href="#basic-process-flow-of-braingnomes"></a>
</h3>
<p>BrainGnomes identifies data for all subjects (and sessions) in your
DICOM and BIDS folders, then determines which subjects need to be
processed. It processes data by looping over subjects, submitting jobs
for each subject and processing step to the HPC scheduler. This ensures
that each subject is processed fully (unless a crash occurs).</p>
<div class="float" id="id">
<img src="braingnomes_flow.png" class="class" style="width:70.0%" alt="BrainGnomes flow"><div class="figcaption">BrainGnomes flow</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="prerequisites-and-setup">Prerequisites and Setup<a class="anchor" aria-label="anchor" href="#prerequisites-and-setup"></a>
</h2>
<p>BrainGnomes is designed to support end-to-end processing of fMRI
data, from original DICOM files to postprocessed data ready for
analysis. That said, you are not required to setup or run any given
step. For example, if you have data that have already be processed up
through fmriprep, you could use BrainGnomes only for postprocessing. In
the setup phase, you will be asked for Singularity containers for all
analysis steps, but many of these can be skipped if you have no
intention of running that step (e.g., MRIQC).</p>
<p>Before using <code>BrainGnomes</code>, attend to the following
prerequisites:</p>
<ol style="list-style-type: decimal">
<li>Installation: Install the BrainGnomes R package. The package is not
on CRAN (yet), so for now, you must install from GitHub. Then load it in
your R session:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install (if needed) and load BrainGnomes</span></span>
<span><span class="co"># devtools::install_github("UNCDEPENdLab/BrainGnomes")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://uncdependlab.github.io/BrainGnomes/">BrainGnomes</a></span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Working Python installation: During postprocessing, the pipeline
supports masking the data by a brain mask that matches the stereotaxic
space. For example, if your fmriprep data are in MNI152NLin2009cAsym
with a resolution of 2mm, a custom brain mask released with the template
can be applied to the data to remove non-brain voxels. This relies on
TemplateFlow (<a href="http://templateflow.org/" class="external-link uri">http://templateflow.org/</a>), a Python library that
provides a number of templates. For this step to work, you must have a
working Python installation.</li>
<li>HPC Access: Access to an HPC cluster with a job scheduler supported
by BrainGnomes (currently SLURM or TORQUE). You should know which
scheduler your cluster uses.</li>
<li>Singularity: Singularity must be available on the HPC system</li>
<li>You must have downloaded or built the required container image files
for:</li>
</ol>
<ul>
<li>fMRIPrep (e.g., a .sif image of fMRIPrep)</li>
<li>HeuDiConv (container for DICOM to BIDS conversion)</li>
<li>MRIQC (container for MRI quality metrics)</li>
<li>ICA-AROMA (if you plan to use ICA-AROMA for denoising)</li>
<li>BIDS Validator (either a container or an installed binary for the
BIDS validation tool) Make note of the filesystem paths to each of these
container files or executables, as the configuration will require
them.</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Data and Files:</li>
</ol>
<ul>
<li>DICOM files for your study, organized in subject (and optionally
session) folders.</li>
<li>A heuristic file for HeuDiConv (a Python script defining how to
translate DICOM filenames into BIDS format). You or your lab should have
this .py file prepared for your study’s naming conventions.</li>
<li>A FreeSurfer license file (e.g., license.txt or
FreeSurferLicense.txt). fMRIPrep requires a valid FreeSurfer license to
run. You can obtain one for free from the FreeSurfer website. Save the
license file path for the configuration.</li>
<li>Optionally, a TemplateFlow directory if you want to use a
non-default location for TemplateFlow data (standard brain templates).
If unsure, you can specify an empty or new directory and fMRIPrep will
manage downloading templates there.</li>
</ul>
<p>With these in place, we can proceed to create a study
configuration.</p>
</div>
<div class="section level2">
<h2 id="creating-a-project-configuration-with-setup_project">Creating a Project Configuration with
<code>setup_project()</code><a class="anchor" aria-label="anchor" href="#creating-a-project-configuration-with-setup_project"></a>
</h2>
<p>The first step in using <code>BrainGnomes</code> is to create a
project configuration, which is essentially a structured list containing
all the parameters and paths needed for your pipeline. This
configuration can be created interactively using the
<code><a href="../reference/setup_project.html">setup_project()</a></code> function. In typical use, you will call
<code><a href="../reference/setup_project.html">setup_project()</a></code> with no arguments to start a new
configuration from scratch, and it will interactively prompt you for all
required information. The function returns an object with your settings,
and it saves a a YAML configuration file to the root of the project
directory (<code>$metadata$project_directory</code>) called
<code>"project_config.yaml"</code>. If you later</p>
<p>Let’s run <code><a href="../reference/setup_project.html">setup_project()</a></code> to initialize a new study
config:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start an interactive setup for a new fMRI study</span></span>
<span><span class="va">scfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_project.html">setup_project</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This function function will ask a series of questions in the R
console to gather information about your study. Below we outline the
typical prompts and how to respond:</p>
<ul>
<li>Project Name – A short name for your project (used for labeling and
logging). Example: “MyStudy2025”.</li>
<li>Project Directory – The root directory where all project outputs
will be stored. You can provide a path (absolute or relative). If the
directory does not exist, BrainGnomes will offer to create it for you.
For example: “/proj/Longleaf/MyStudy2025” (this will contain subfolders
for BIDS data, fMRIPrep outputs, logs, etc.).</li>
<li>DICOM Directory – The location of your raw DICOM files. This could
be a folder containing subfolders per subject (and session). If it
doesn’t exist, you’ll be prompted to create it as well. For example:
“/proj/Longleaf/MyStudy2025/data_DICOMs”.</li>
<li>TemplateFlow Directory – Path to your TemplateFlow data (standard
templates for fMRIPrep). If you have a central TemplateFlow directory
(e.g., ~/templateflow or a shared path), provide it.</li>
<li>Scratch Directory – A path for temporary scratch space. This is
often on a fast storage (like $TMPDIR or a scratch disk) that is not
intended for long-term storage. If you’re not sure, you can use a
sub-directory in your project directory (e.g.,
“/proj/Longleaf/MyStudy2025/scratch”). Just make sure to keep an eye on
the size of this folder and clean it up periodically if this isn’t done
automatically by your HPC system.</li>
</ul>
<p>You will then be asked whether you want to include major steps in the
pipeline. Each of these can be toggled depending on your intended use.
For example, if you already have fmriprep-processed data and only wish
to apply postprocessing, you wouldn’t need BIDS conversion. For each
major step in the pipeline, you will be asked to specify the following
HPC scheduler settings:</p>
<ul>
<li>The amount of memory needed for the job in GB.</li>
<li>The number of hours needed to complete the job. (Always start a bit
higher than you think you need to avoid killed jobs.)</li>
<li>How many CPU cores should be requested for this job.</li>
<li>Any other command line arguments that will be passed to the command
(e.g., fmriprep)</li>
<li>Any arguments that should be passed to the HPC scheduler (e.g.,
SLURM) beyond what the pipeline already handles itself.</li>
</ul>
<div class="section level3">
<h3 id="bids-conversion">BIDS conversion<a class="anchor" aria-label="anchor" href="#bids-conversion"></a>
</h3>
<p>You will be prompted for whether you want to include BIDS conversion:
<code>Run BIDS conversion? (yes/no; Press enter to accept default: yes)</code>.
If you say yes, you will be asked for the location of a heudiconv
container, followed by questions about memory, compute hours, CPU cores,
command line arguments, and scheduler arguments.</p>
<p><code>BrainGnomes</code> uses HeuDiConv (<a href="https://github.com/nipy/heudiconv" class="external-link uri">https://github.com/nipy/heudiconv</a>) to convert DICOM
images into BIDS-compatible files and folders. HeuDiConv requires
information on how to identify subjects/sessions in your DICOM folder
and how to convert them. As part of the BIDS conversion setup, you will
be asked to provide:</p>
<ol style="list-style-type: decimal">
<li><p>Subject Regex: A regular expression used to match all subject
directories in the root of your DICOM directory. Consider, for example,
a DICOM directory that includes the following folders:
<code>logs</code>, <code>5300</code>, and <code>5420</code>, where the
numbered directories are the subject IDs. In this case, a good regular
expression for identifying subjects would be, <code>[0-9]+</code> –
matching folders containing numbers. If you want <em>any</em> folder in
the root of your DICOM directory to be considered a subject folder, use
<code>.*</code>.</p></li>
<li><p>(Optional) Session Regex: if you have multi-session data and
these are stored in your DICOM directory as subfolders (i.e., something
like sub-100/ses-1, sub-100/ses-2) you may specify a regular expression
to match session folders inside each subject’s folder. For example, a
session regex of <code>ses-[0-9]+</code> would match any subfolder
starting with <code>ses-</code> followed by one or more numbers. If you
do not have multisession data in this form, leave this blank.</p></li>
<li><p>Subject ID Match Regex: Whereas the Subject Regex specifies what
folders in the root of your DICOM directory should be considered, the
Subject ID Match regular expression specifies how to <em>extract</em>
the ID from the folder name. Use parentheses to denote which part of the
folder name should be preserved as part of the ID. For example, if
folders are named something like <code>sub-&lt;numbers&gt;</code> and
you want to keep the numeric part as the ID, the Subject ID Match Regex
would be, <code>sub-([0-9]+)</code>. If the ID is stored in different
parts of the folder name, you can use more than one set of parentheses,
in which case these will be extracted and pasted together with an
underscore separating each part. For example, consider a folder
<code>subject-16-visit-3</code>. You could extract a subject ID of
<code>16_3</code> using the Regex:
<code>subject-([0-9]+)-visit-([0-9]+)</code>.</p></li>
<li><p>Session Match Regex: This follows the same logic as the Subject
ID Match Regex, but applies to session folders nested within subject
folders. For example, if you have a folder like:
<code>subject-12/ses-1</code>, you would specify
<code>subject-([0-9]+)</code> as your subject ID match regex and
<code>ses-([0-9]+)</code> as your session match regex.</p></li>
<li><p>Heuristic File: Path to the heudiconv heuristic Python script for
your study. For example:
<code>"/proj/Longleaf/MyStudy2025/heuristic.py"</code>. This script
defines the naming scheme for converting DICOMs to BIDS format. Details
for preparing such files can be found here: <a href="https://heudiconv.readthedocs.io/en/latest/heuristics.html" class="external-link uri">https://heudiconv.readthedocs.io/en/latest/heuristics.html</a>.</p></li>
<li><p>Overwrite and Clear Cache: Boolean flags (overwrite and
clear_cache) that determine if heudiconv should overwrite existing
converted data and clear any caching between runs. Usually, you can
accept defaults (FALSE) unless you are re-running conversion and want to
start fresh.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="fmriprep-setup">fmriprep setup<a class="anchor" aria-label="anchor" href="#fmriprep-setup"></a>
</h3>
<p>Next, you will be asked to decide whether to include fmriprep in the
pipeline:
<code>Do you want to include fMRIPrep as part of your preprocessing pipeline? (yes/no; Press enter to accept default: yes)</code>.
If you say yes, you will be asked for the following:</p>
<ol style="list-style-type: decimal">
<li>Location of the fmriprep container</li>
<li>Resource requirements: Defaults for BrainGnomes fmriprep are 48 GB
RAM, 24 hours, and 12 cores</li>
<li>Additional command line arguments to fmriprep. See <a href="https://fmriprep.org/en/stable/usage.html" class="external-link uri">https://fmriprep.org/en/stable/usage.html</a> for
details.</li>
<li>Additional arguments to be passed to the HPC scheduler</li>
<li>Output Spaces: You will choose the standard spaces that fMRIPrep
should output the preprocessed data in. Common choices include MNI
anatomical spaces (e.g., MNI152NLin6Asym), the subject’s T1w native
space, fsaverage (for surface data), etc. The setup_project() function
will present a menu or prompt for selecting these. You can pick multiple
spaces. For example, a typical selection might be MNI152NLin6Asym and
T1w (and if analyzing surface data, possibly fsaverage).</li>
</ol>
<ul>
<li>You will also be asked to provide a ‘resolution index’ for each
template, which governs the spatial resolution of the output image. If
this is omitted, the resolution of the output file will match the voxel
size of the input file. Note that the index is not synonymous with the
voxel size (e.g. ‘2’ may not be 2mm). See <a href="https://fmriprep.org/en/stable/spaces.html#standard-spaces" class="external-link uri">https://fmriprep.org/en/stable/spaces.html#standard-spaces</a>
for details.</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>FreeSurfer License File: You must provide the path to your
FreeSurfer license file so fMRIPrep can run FreeSurfer during
preprocessing.</li>
</ol>
</div>
<div class="section level3">
<h3 id="mriqc-setup">MRIQC setup<a class="anchor" aria-label="anchor" href="#mriqc-setup"></a>
</h3>
<p>Next, you will decide whether to include MRIQC in the pipeline:
<code>Run MRIQC? (yes/no; Press enter to accept default: yes)</code>. If
you say yes, you will be asked for:</p>
<ol style="list-style-type: decimal">
<li>Location of the mriqc container</li>
<li>Resource requirements: Defaults for BrainGnomes mriqc are 32 GB RAM,
12 hours, and 1 core</li>
<li>Additional command line arguments to mriqc. See <a href="https://mriqc.readthedocs.io/en/latest/usage.html#command-line-interface" class="external-link uri">https://mriqc.readthedocs.io/en/latest/usage.html#command-line-interface</a>
for details.</li>
<li>Additional arguments to be passed to the HPC scheduler</li>
</ol>
</div>
<div class="section level3">
<h3 id="ica-aroma-setup">ICA-AROMA setup<a class="anchor" aria-label="anchor" href="#ica-aroma-setup"></a>
</h3>
<p>Next, you will decide whether to include ICA-AROMA in the pipeline:
<code>Run ICA-AROMA? (yes/no; Press enter to accept default: yes)</code>.
If you say yes, you will be asked for:</p>
<ol style="list-style-type: decimal">
<li>Location of the ICA-AROMA container</li>
<li>Resource requirements: Defaults for BrainGnomes mriqc are 32 GB RAM,
36 hours, and 1 core</li>
<li>Additional command line arguments to fmripost_aroma. See <a href="https://fmripost-aroma.readthedocs.io/latest/usage.html#command-line-arguments" class="external-link uri">https://fmripost-aroma.readthedocs.io/latest/usage.html#command-line-arguments</a>
for details.</li>
<li>Additional arguments to be passed to the HPC scheduler</li>
</ol>
<p>(Note: As of fMRIPrep v20.2+, ICA-AROMA is no longer integrated in
fMRIPrep and must be run separately as a BIDS-App called
fmripost-aroma.)</p>
</div>
<div class="section level3">
<h3 id="postprocessing-setup">Postprocessing setup<a class="anchor" aria-label="anchor" href="#postprocessing-setup"></a>
</h3>
<p>Next, will decide whether to include postprocessing in the pipeline:
<code>Do you want to enable postprocessing of the BOLD data?</code>.
Postprocessing includes several optional steps, including</p>
<ul>
<li>Applying a brain mask</li>
<li>Spatial smoothing</li>
<li>Denoising using ICA-AROMA</li>
<li>‘Scrubbing’ of high-motion/high-artifact timepoints</li>
<li>Temporal filtering (e.g., high-pass filtering)</li>
<li>Intensity normalization</li>
<li>Confound calculation and regression</li>
</ul>
<p>If you say ‘yes’ to postprocessing, you will be asked to setup one or
more postprocessing streams for your data. BrainGnomes supports multiple
postprocessing streams, such that the same data can be postprocessed in
multiple ways. For example, you might wish to compare results with
different levels of smoothing or with different temporal filtering
settings.</p>
<p>To specify streams, you will be dropped into a menu system that
lookes like this:</p>
<pre><code>Postprocessing supports multiple streams, allowing you to postprocess data in multiple ways.
Each stream also asks about which files should be postprocessed using the stream. For example,
files with 'rest' in their name could be postprocessed in one way and files with 'nback' could
be processed a different way.

Current postprocessing streams:
  (none defined yet)
Modify postprocessing streams: 

1: Add a stream
2: Edit a stream
3: Delete a stream
4: Show stream settings
5: Finish</code></pre>
<p>For additional details about postprocessing, see (in progress) <a href="postprocessing.html">Postprocessing vignette</a>.</p>
</div>
<div class="section level3">
<h3 id="bids-validation-setup">BIDS validation setup<a class="anchor" aria-label="anchor" href="#bids-validation-setup"></a>
</h3>
<p>As an optional part of the pipeline, bids-validator can be run on the
BIDS directory (once BIDS conversion has completed). This is
accomplished by <code><a href="../reference/run_bids_validation.html">run_bids_validation()</a></code>, which can be run as
needed. Here, saying yes to the prompt
<code>Enable BIDS validation? (yes/no; Press enter to accept default: yes)</code>
will setup the bids-validator step for later use. You will be asked
for:</p>
<ol style="list-style-type: decimal">
<li>Location of the bids-validator program</li>
<li>Resource requirements: Defaults for BrainGnomes bids-validator are
32 GB RAM, 2 hours, and 1 core.</li>
<li>Additional command lines arguments to bids-validator. <a href="https://bids-validator.readthedocs.io/en/stable/user_guide/command-line.html" class="external-link uri">https://bids-validator.readthedocs.io/en/stable/user_guide/command-line.html</a>
for details.</li>
<li>Additional arguments to be passed to the HPC scheduler</li>
</ol>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>After <code>setup_study</code> completes, it will write a file called
<code>project_config.yaml</code> into your project directory (if one
exists, you will be prompted whether to overwrite it). This will contain
all of your settings and can be used in future to load a project into R
from an existing configuration.</p>
</div>
</div>
<div class="section level2">
<h2 id="braingnomes-workflow-in-a-nutshell">BrainGnomes workflow in a nutshell<a class="anchor" aria-label="anchor" href="#braingnomes-workflow-in-a-nutshell"></a>
</h2>
<div class="section level3">
<h3 id="step-1-setup-your-study">Step 1: Setup your study<a class="anchor" aria-label="anchor" href="#step-1-setup-your-study"></a>
</h3>
<p>Use <code><a href="../reference/setup_project.html">setup_project()</a></code> to interactively complete or correct
configuration entries:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_project.html">setup_project</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will say a <code>project_config.yaml</code> file in your project
directory.</p>
</div>
</div>
<div class="section level2">
<h2 id="step-2-load-your-configuration">Step 2: Load Your Configuration<a class="anchor" aria-label="anchor" href="#step-2-load-your-configuration"></a>
</h2>
<p>The step above results in an object in your R workspace called
<code>scfg</code> that contains all of your project settings. This is
great for now, but if you quit R and come back later, you probably want
to pick up from where you left off. You can use
<code><a href="../reference/load_project.html">load_project()</a></code> to load an existing configuration:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_project.html">load_project</a></span><span class="op">(</span><span class="st">"/path/to/my/project"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-3-edit-configuration">Step 3: Edit Configuration<a class="anchor" aria-label="anchor" href="#step-3-edit-configuration"></a>
</h2>
<p>Use <code><a href="../reference/edit_project.html">edit_project()</a></code> for a menu-driven interface to modify
parts of the study configuration.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/edit_project.html">edit_project</a></span><span class="op">(</span><span class="va">scfg</span><span class="op">)</span></span></code></pre></div>
<p>Follow the prompts to choose what to edit. This is useful if you want
to change job resources (e.g., memory or CPU for fMRIPrep) or adjust CLI
options for specific pipeline steps.</p>
</div>
<div class="section level2">
<h2 id="step-4-run-the-study">Step 4: Run the Study<a class="anchor" aria-label="anchor" href="#step-4-run-the-study"></a>
</h2>
<p>Once your configuration is complete, you can run the pipeline.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_project.html">run_project</a></span><span class="op">(</span><span class="va">scfg</span><span class="op">)</span></span></code></pre></div>
<p>By default, this will prompt you whether to run all steps in your
pipeline. It will also process all available subjects and sessions
defined in the BIDS directory.</p>
<p>If you want to run only a subset of subjects, you can use the
<code>subject_filter</code> argument like:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run subjects 242 and 510 only</span></span>
<span><span class="fu"><a href="../reference/run_project.html">run_project</a></span><span class="op">(</span><span class="va">scfg</span>, subject_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"242"</span>, <span class="st">"510"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Likewise, if you want to skip the menu prompts for which step to run,
you can use the <code>steps</code> argument. For example, to run only
postprocessing on these subjects:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run subjects 242 and 510 only</span></span>
<span><span class="fu"><a href="../reference/run_project.html">run_project</a></span><span class="op">(</span><span class="va">scfg</span>, subject_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"242"</span>, <span class="st">"510"</span><span class="op">)</span>, steps<span class="op">=</span><span class="st">"postprocess"</span><span class="op">)</span></span></code></pre></div>
<p>The available <code>steps</code> are
<code>"bids_conversion", "mriqc", "fmriprep", "aroma", "postprocess"</code>.
Note that if you request a step in <code>run_project</code> that was
never configured it will result in an error.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Hallquist.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
